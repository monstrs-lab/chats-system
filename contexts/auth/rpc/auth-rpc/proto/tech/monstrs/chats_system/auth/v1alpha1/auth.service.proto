syntax = "proto3";

package tech.monstrs.chats_system.auth.v1alpha1;

import "google/protobuf/wrappers.proto";
import "tech/monstrs/chats_system/core/v1alpha1/schema.tl.core_types.proto";
import "tech/monstrs/chats_system/core/v1alpha1/schema.tl.transport.proto";
import "tech/monstrs/chats_system/core/v1alpha1/schema.tl.sync.proto";

service AuthService {
  rpc getAuthorizations (TLAuthsessionGetAuthorizations) returns (tech.monstrs.chats_system.core.v1alpha1.AccountAuthorizations) {}
  rpc resetAuthorization (TLAuthsessionResetAuthorization) returns (VectorLong) {}
  rpc getLayer (TLAuthsessionGetLayer) returns (tech.monstrs.chats_system.core.v1alpha1.Int32) {}
  rpc getLangPack (TLAuthsessionGetLangPack) returns (tech.monstrs.chats_system.core.v1alpha1.String) {}
  rpc getClient (TLAuthsessionGetClient) returns (tech.monstrs.chats_system.core.v1alpha1.String) {}
  rpc getLangCode (TLAuthsessionGetLangCode) returns (tech.monstrs.chats_system.core.v1alpha1.String) {}
  rpc getUserId (TLAuthsessionGetUserId) returns (tech.monstrs.chats_system.core.v1alpha1.Int64) {}
  rpc getPushSessionId (TLAuthsessionGetPushSessionId) returns (tech.monstrs.chats_system.core.v1alpha1.Int64) {}
  rpc getFutureSalts (TLAuthsessionGetFutureSalts) returns (tech.monstrs.chats_system.core.v1alpha1.FutureSalts) {}
  rpc queryAuthKey (TLAuthsessionQueryAuthKey) returns (AuthQueryAuthKeyResponse) {}
  rpc setAuthKey (TLAuthsessionSetAuthKey) returns (tech.monstrs.chats_system.core.v1alpha1.Bool) {}
  rpc bindAuthKeyUser (TLAuthsessionBindAuthKeyUser) returns (tech.monstrs.chats_system.core.v1alpha1.Int64) {}
  rpc unbindAuthKeyUser (TLAuthsessionUnbindAuthKeyUser) returns (tech.monstrs.chats_system.core.v1alpha1.Bool) {}
  rpc getPermAuthKeyId (TLAuthsessionGetPermAuthKeyId) returns (tech.monstrs.chats_system.core.v1alpha1.Int64) {}
  rpc bindTempAuthKey (TLAuthsessionBindTempAuthKey) returns (tech.monstrs.chats_system.core.v1alpha1.Bool) {}
  rpc setClientSessionInfo (TLAuthsessionSetClientSessionInfo) returns (tech.monstrs.chats_system.core.v1alpha1.Bool) {}
  rpc getAuthorization (TLAuthsessionGetAuthorization) returns (tech.monstrs.chats_system.core.v1alpha1.Authorization) {}
  rpc getAuthStateData (TLAuthsessionGetAuthStateData) returns (AuthKeyStateData) {}
  rpc setLayer (TLAuthsessionSetLayer) returns (tech.monstrs.chats_system.core.v1alpha1.Bool) {}
  rpc setInitConnection (TLAuthsessionSetInitConnection) returns (tech.monstrs.chats_system.core.v1alpha1.Bool) {}
}

enum TLConstructor {
  CRC32_UNKNOWN = 0;
  CRC32_clientSession = -1701940816;
  CRC32_authKeyStateData = -646863312;
  CRC32_authsession_getAuthorizations = 820122180;
  CRC32_authsession_resetAuthorization = -1923126106;
  CRC32_authsession_getLayer = -1473309015;
  CRC32_authsession_getLangPack = 700170598;
  CRC32_authsession_getClient = 1616401854;
  CRC32_authsession_getLangCode = 1486468441;
  CRC32_authsession_getUserId = 1464409260;
  CRC32_authsession_getPushSessionId = -1279119039;
  CRC32_authsession_getFutureSalts = -1194371051;
  CRC32_authsession_queryAuthKey = 1421293608;
  CRC32_authsession_setAuthKey = 1049889937;
  CRC32_authsession_bindAuthKeyUser = 198050851;
  CRC32_authsession_unbindAuthKeyUser = 123258440;
  CRC32_authsession_getPermAuthKeyId = -1871420202;
  CRC32_authsession_bindTempAuthKey = 1620004742;
  CRC32_authsession_setClientSessionInfo = 47841172;
  CRC32_authsession_getAuthorization = 1851660579;
  CRC32_authsession_getAuthStateData = 1331573041;
  CRC32_authsession_setLayer = 1147475077;
  CRC32_authsession_setInitConnection = 2095024780;
}

message AuthKeyStateData {
  optional string predicate_name = 1;
  optional TLConstructor constructor = 2;
  optional bytes auth_key_id = 3;
  optional bytes user_id = 4;
  optional int32 key_state = 5;
  optional int32 layer = 6;
  optional int32 client_type = 7;
  optional bytes android_push_session_id = 8;
}

message TLAuthKeyStateData {
  optional AuthKeyStateData data2 = 1;
}

message ClientSession {
  optional string predicate_name = 1;
  optional TLConstructor constructor = 2;
  optional bytes auth_key_id = 3;
  optional string ip = 4;
  optional int32 layer = 5;
  optional int32 api_id = 6;
  optional string device_model = 7;
  optional string system_version = 8;
  optional string app_version = 9;
  optional string system_lang_code = 10;
  optional string lang_pack = 11;
  optional string lang_code = 12;
  optional string proxy = 13;
  optional string params = 14;
}

message TLClientSession {
  optional ClientSession data2 = 1;
}

message TLAuthsessionGetAuthorizations {
  optional TLConstructor constructor = 1;
  optional bytes user_id = 3;
  optional bytes exclude_auth_keyId = 4;
}

message TLAuthsessionResetAuthorization {
  optional TLConstructor constructor = 1;
  optional bytes user_id = 3;
  optional bytes auth_key_id = 4;
  optional bytes hash = 5;
}

message TLAuthsessionGetLayer {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
}

message TLAuthsessionGetLangPack {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
}

message TLAuthsessionGetClient {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
}

message TLAuthsessionGetLangCode {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
}

message TLAuthsessionGetUserId {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
}

message TLAuthsessionGetPushSessionId {
  optional TLConstructor constructor = 1;
  optional bytes user_id = 3;
  optional bytes auth_key_id = 4;
  optional int32 token_type = 5;
}

message TLAuthsessionGetFutureSalts {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
  optional int32 num = 4;
}

message TLAuthsessionQueryAuthKey {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
}

message AuthQueryAuthKeyResponse {
  optional tech.monstrs.chats_system.core.v1alpha1.AuthKeyInfo authKey = 1;
}

message TLAuthsessionSetAuthKey {
  optional TLConstructor constructor = 1;
  optional tech.monstrs.chats_system.core.v1alpha1.AuthKeyInfo auth_key = 3;
  optional tech.monstrs.chats_system.core.v1alpha1.FutureSalt future_salt = 4;
  optional int32 expires_in = 5;
}

message TLAuthsessionBindAuthKeyUser {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
  optional bytes user_id = 4;
}

message TLAuthsessionUnbindAuthKeyUser {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
  optional bytes user_id = 4;
}

message TLAuthsessionGetPermAuthKeyId {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
}

message TLAuthsessionBindTempAuthKey {
  optional TLConstructor constructor = 1;
  optional bytes perm_auth_key_id = 3;
  optional bytes nonce = 4;
  optional int32 expires_at = 5;
  optional bytes encrypted_message = 6;
}

message TLAuthsessionSetClientSessionInfo {
  optional TLConstructor constructor = 1;
  optional ClientSession data = 3;
}

message TLAuthsessionGetAuthorization {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
}

message TLAuthsessionGetAuthStateData {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
}

message TLAuthsessionSetLayer {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
  optional string ip = 4;
  optional int32 layer = 5;
}

message TLAuthsessionSetInitConnection {
  optional TLConstructor constructor = 1;
  optional bytes auth_key_id = 3;
  optional string ip = 4;
  optional int32 api_id = 5;
  optional string device_model = 6;
  optional string system_version = 7;
  optional string app_version = 8;
  optional string system_lang_code = 9;
  optional string lang_pack = 10;
  optional string lang_code = 11;
  optional string proxy = 12;
  optional string params = 13;
}

message VectorLong {
  repeated int64 datas = 1;
}
